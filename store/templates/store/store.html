{% extends 'base.html' %}
{% load static %}
{% block title %} {{ block.super }} - Store {% endblock title %}

{% block css %}
    <link rel="stylesheet" href="{% static 'css/store.css' %}">
{% endblock css %}

{% block content %}

<form id="search-form" >
    <div class="search">
        <label for="search"></label>
        <input name="search" type="text" placeholder="Search">
        <button class="btn btn-primary search-btn" id="search-btn">Search</button>
    </div>
</form>

<div class="products">
    
    {% for product in products %}
        <div class="card">
            <div class="card-img">
            <a href="{% url 'detail' product.id %}">
                <img src="{{ product.imageURL}}" alt="{{ product.name }} image">
            </a>
            </div>
            <div class="card-details">
                <p>{{ product.name }}</p>
                <h3>&#8358;{{ product.price|floatformat:2 }}</h3>
            </div>
            {% if product.in_stock %}
                <button
                    data-action="add"
                    data-product="{{ product.id }}"
                    class="btn btn-primary card-btn product-btn">Add To Cart
                </button>
            {% else %}
                <button class="btn btn-secondary">
                    Sold Out
                </button>
            {% endif %}
        </div>
    {% endfor %}

    <div class="pagination">
        {% if is_paginated %}
            {% if page_obj.has_previous %}
                <a href="?page=1">&laquo; First</a>
                <a href="?page={{ page_obj.previous_page_number }}">previous</a>
            {% endif %}
            <span class="current">
                Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
            </span>

            {% for num in page_obj.paginator.page_range %}
                {% if page_obj.number == num %}
                    <a class="btn bnt-primary" href="?page={{ num }}">{{ num }}</a>
                {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'-3' %}
                    <a class="btn bnt-primary" href="?page={{ num }}">{{ num }}</a>
                {% endif %}
            {% endfor %}
            {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}">next</a>
                <a href="?page={{ page_obj.paginator.num_pages }}">Last &raquo;</a>
            {% endif %}
        {% endif %}
    </div>
</div>


{% endblock content %}